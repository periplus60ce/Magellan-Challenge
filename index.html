<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Magellan Research Challenge</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .hidden {
      display: none;
    }
    #message, #liveMessage {
      margin-top: 10px;
      font-weight: bold;
    }
    button {
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 16px;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #timerContainer {
      width: 100%;
      background-color: #ddd;
      height: 20px;
      margin-top: 10px;
    }
    #timerBar {
      height: 20px;
      background-color: #4caf50;
      width: 100%;
      transition: width 1s linear;
    }
    #quitBtn {
      position: absolute;
      bottom: 20px;
      left: 20px;
    }
    #languageToggle {
      position: absolute;
      top: 20px;
      right: 20px;
    }
  </style>
</head>
<body>
  <button id="languageToggle">UKR</button>

  <div id="challenge">
    <h1 data-en="Magellan Research Challenge" data-uk="Дослідницький виклик Магеллана">Magellan Research Challenge</h1>
    <p id="question" data-en="Test, test, test. How many letters are there in the Ukrainian alphabet?" data-uk="Тест, тест, тест. Скільки літер в українському алфавіті?">Test, test, test. How many letters are there in the Ukrainian alphabet?</p>
    <input type="text" id="answerInput" data-en-placeholder="Your answer here" data-uk-placeholder="Ваша відповідь тут" placeholder="Your answer here">
    <button id="startSubmitBtn" data-en="SUBMIT" data-uk="ВІДПРАВИТИ">SUBMIT</button>
    <div id="message"></div>
    <button id="continueBtn" class="hidden" data-en="CLICK TO CONTINUE" data-uk="НАТИСНІТЬ, ЩОБ ПРОДОВЖИТИ">CLICK TO CONTINUE</button>
  </div>

  <div id="instructions" class="hidden">
    <h2 data-en="Instructions" data-uk="Інструкції">Instructions</h2>
    <p id="instructionsText" 
       data-en="You will be presented with 22 questions. Use a variety of OSINT tools and techniques to find the answers. If you choose to copy and paste your answer, make sure to use CTRL+V to paste it, or you can type it in. Good luck!" 
       data-uk="Вам буде запропоновано 22 запитання. Використовуйте різноманітні інструменти та методи OSINT для пошуку відповідей. Якщо ви копіюєте відповідь, вставте її за допомогою CTRL+V або введіть вручну. Успіхів!">
      You will be presented with 22 questions. Use a variety of OSINT tools and techniques to find the answers. If you choose to copy and paste your answer, make sure to use CTRL+V to paste it, or you can type it in. Good luck!
    </p>
    <button id="letsGoBtn" data-en="Let's go" data-uk="Поїхали">Let's go</button>
  </div>

  <div id="quiz" class="hidden">
    <h1 data-en="Magellan Challenge" data-uk="Виклик Магеллана">Magellan Challenge</h1>
    <p id="liveInstruction" data-en="Press 'ENTER' to confirm your answer." data-uk="Натисніть 'ENTER', щоб підтвердити відповідь.">Press 'ENTER' to confirm your answer.</p>
    <p id="liveQuestion"></p>
    <input type="text" id="liveAnswer" data-en-placeholder="Your answer here" data-uk-placeholder="Ваша відповідь тут" placeholder="Your answer here">
    <button id="submitBtn" data-en="SUBMIT" data-uk="ВІДПРАВИТИ">SUBMIT</button>
    <button id="skipBtn" data-en="SKIP" data-uk="ПРОПУСТИТИ">SKIP</button>
    <div id="liveMessage"></div>
    <div id="timerContainer"><div id="timerBar"></div></div>
    <p id="scoreDisplay"></p>
    <button id="restartBtn" class="hidden" data-en="Restart Challenge" data-uk="Почати заново">Restart Challenge</button>
  </div>

  <button id="quitBtn" data-en="I quit" data-uk="Я здаюся">I quit</button>

  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.addEventListener('keydown', event => {
      if (event.key === 'F12' || (event.ctrlKey && event.shiftKey && ['I', 'J', 'C'].includes(event.key))) {
        event.preventDefault();
      }
    });

    let totalScore = 0;
    let lang = 'en';
    let remainingQuestions = [];
    let usedQuestions = [];
    let timerInterval;

    const liveQuestion = document.getElementById('liveQuestion');
    const liveAnswer = document.getElementById('liveAnswer');
    const liveMessage = document.getElementById('liveMessage');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const continueBtn = document.getElementById('continueBtn');
    const instructionsDiv = document.getElementById('instructions');
    const challengeDiv = document.getElementById('challenge');
    const letsGoBtn = document.getElementById('letsGoBtn');
    const quizDiv = document.getElementById('quiz');
    const submitBtn = document.getElementById('submitBtn');
    const skipBtn = document.getElementById('skipBtn');
    const restartBtn = document.getElementById('restartBtn');
    const quitBtn = document.getElementById('quitBtn');

    const questions = [
      {
    en: "Refer to government databases (laws, reports, statistics) What number is stamped at the bottom left of the first page of a hyperlinked document in the section regarding wildcat dumping in Cochise County, AZ, code compliance?",
    uk: "Зверніться до державних баз даних (закони, звіти, статистика). Який номер стоїть у нижньому лівому куті першої сторінки гіперпосилання у розділі про незаконні сміттєзвалища в окрузі Кочіс, штат Арізона (дотримання норм)?",
    answer: "030309993"
  },
  {
    en: "Try using Google tools. What is the first name of the author of an excert published online on May 25, 2001, about an explosion in 1908? Also, append the number of pages of the online article to your answer (for example, name Igor and 12 pages make Igor12.",
    uk: "Спробуйте інструменти Google. Яке ім'я автора уривка, опублікованого онлайн 25 травня 2001 року про вибух 1908 року? Додайте кількість сторінок цієї статті до імені (наприклад: Igor + 12 = Igor12).",
    answer: "Wolfgang9"
  },
  {
    en: "Search some academic papers (Google Scholar, ResearchGate). What is the country where the photograph was taken? Photograph #6 p.34. The Dragonflies of Europe by R.R. Askew (revised edition 2004).",
    uk: "Знайдіть академічну статтю (Google Scholar, ResearchGate). У якій країні було зроблено фотографію №6 на стор. 34 у книзі \"The Dragonflies of Europe\" Р.Р. Аскʼю (видання 2004)?",
    answer: "Switzerland"
  },
  {
    en: "Look in corporate records, official business registries, SEC filings. What is the first word of the previous legal name (starts with a “W”) of “Corporation X” in NC, USA? Prepend SOSID to your answer.",
    uk: "Знайдіть у корпоративних реєстрах, офіційних бізнес-реєстрах, звітах SEC. Яке перше слово попередньої юридичної назви (починається з 'W') компанії “Corporation X” у Північній Кароліні, США? Додайте SOSID на початку.",
    answer: "1899761Westinghouse"
  },
  {
    en: "Leverage Geocode.xyz. Generate coordinates for Skole. Copy and paste them into the search bar of Google maps. Find the closest restaurant to the pin. The name is related to sheep. View the pictures. Look at the third bookshelf from the bottom. The fourth book on the right (it is navy blue). The answer is the country of origin of the author.",
    uk: "Скористайтеся Geocode.xyz. Згенеруйте координати для Сколе. Скопіюйте та вставте їх у пошук Google Maps. Знайдіть найближчий ресторан — назва пов'язана з вівцями. Подивіться на фотографії. Третя полиця знизу, четверта книга праворуч (темно-синя). Вкажіть країну походження автора книги.",
    answer: "Argentina"
  },
  {
    en: "Geospatial data (Goolgle Earth Pro, Google Maps, Mapillary). What word is written inside of the toilet of a hotel located 23.77 mi (38.26 km) SW away from 45R VL 92652 95877?",
    uk: "Геопросторові дані (Google Earth Pro, Google Maps, Mapillary). Яке слово написано всередині унітазу в готелі, що розташований за 38.26 км на південний захід від 45R VL 92652 95877?",
    answer: "TAJ"
  },
  {
    en: "Geospatial data again (Google Lens, Chat GPT, Google Maps, Google Earth Pro Mapillary). Use the provided image to find your answer written on the red structure. To see the structure, you should be standing 241.18 ft (73.51 m) south of the image.",
    uk: "Знову геопросторові дані (Google Lens, Chat GPT, Google Maps, Google Earth Pro, Mapillary). Використайте надане зображення, щоб побачити напис на червоній конструкції. Щоб побачити її, станьте на 73.51 м південніше зображення.",
    answer: "TELEPHONE"
  },
  {
    en: "Now it is time for some Google “Dorking” and Boolean logic. Your answer is the last word of passage 18 on page 11. Find a pdf file that contains words: art, war, sun in its title on a Canadian website that contains any letter in front of the word “.ualberta” in its URL.",
    uk: "Спробуйте Google “Dorking” та булеву логіку. Знайдіть PDF-файл з назвою, що містить слова: art, war, sun на канадському сайті, в URL якого є будь-яка літера перед словом '.ualberta'. Ваша відповідь — останнє слово в уривку 18 на сторінці 11.",
    answer: "battle"
  },
  {
    en: "Explore Google trends. Search for the word Ukraine in the US in the District of Columbia in the last 12 months in the News in the category of Web Search. Your answer is the value of interest over time for the word Ukraine in the period of July 13-19.",
    uk: "Дослідіть Google Trends. Знайдіть слово Ukraine у США в окрузі Колумбія за останні 12 місяців у розділі Новини у категорії Web Search. Ваша відповідь — це значення інтересу з часом для слова Ukraine у період з 13 по 19 липня.",
    answer: "49"
  },
  {
    en: "Let’s check websites for malicious code (“https://virustotal.com”). Your answer is the type of cyberthreat that the website “https://www.fantasticfilms.ru” present according to BitDefender.",
    uk: "Перевіримо сайти на наявність шкідливого коду (https://virustotal.com). Ваша відповідь — тип кіберзагрози, яку виявив BitDefender на сайті “https://www.fantasticfilms.ru”.",
    answer: "Phishing"
  },
  {
    en: "Let’s check websites for malicious code (“https://virustotal.com”). Your answer is the cyberthreat label for the website “https://www.gncr.org” according to Webroot",
    uk: "Перевіримо сайти на наявність шкідливого коду (“https://virustotal.com”). Ваша відповідь — мітка загрози згідно з Webroot для веб-сторінки “https://www.gncr.org",
    answer: "Malicious"
  },
  {
    en: "Let’s check websites for malicious code (“https://virustotal.com”). Your answer is the cyberthreat label for the website “https://www.purplehoodie.com” according to Fortinet.",
    uk: "Перевіримо сайти на наявність шкідливого коду (“https://virustotal.com”). Ваша відповідь — мітка загрози для веб-сторінки “https://www.purplehoodie.com” згідно з Fortinet.",
    answer: "Malware"
  },
  {
    en: "Let’s venture into dnsdumpster.com. When inspecting “bbc.com”, look for the ASN name of the subdomain IP 198.51.44.73",
    uk: "Перейдіть на dnsdumpster.com. Перевірте “bbc.com” і знайдіть ASN-ім’я піддомену з IP-адресою 198.51.44.73",
    answer: "NSONE"
  },
  {
    en: "Let’s venture into dnsdumpster. What is the ASN value for the URL of IP 108.162.193.239 in the NS records for the domain “xosodaiphat.com”?",
    uk: "Перейдіть на dnsdumpster. Яке значення ASN для URL з IP 108.162.193.239 у записах NS для домену “xosodaiphat.com”?",
    answer: "13335"
  },
  {
    en: "Let’s venture into dnsdumpster. What is the verification token for “jamf.com” found when inspecting “trustpilot.com”?",
    uk: "Перейдіть на dnsdumpster. Який токен підтвердження для “jamf.com” знайдено при аналізі “trustpilot.com”?",
    answer: "hCZILKggaY23aId4VBfmVA"
  },
  {
    en: "Let’s venture into dnsdumpster. While inspecting “ox.ac.uk”, specifically TXT records, what is the domain verification token for OpenAI? Don’t include “dv-“. Append it to the last word after the URL to a website under the image.",
    uk: "Перейдіть на dnsdumpster. Перевіряючи TXT-записи домену “ox.ac.uk”, знайдіть токен перевірки для OpenAI (без “dv-”) і додайте його до останнього слова після URL під зображенням.",
    answer: "projectFrXjlS30zrnR8T3D1ktwxud7"
  },
  {
    en: "Go to “Urlscan.io”. What month was the TLS certificate for “wadefamilytree.org” issue?",
    uk: "Зайдіть на сайт “Urlscan.io”. В якому місяці було видано TLS-сертифікат для “wadefamilytree.org”?",
    answer: "August"
  },
  {
    en: "Keep exploring “Urlscan.io”. What is the name of the city where the main IP for “tacticalshooters.net.restorationcheck.com” is located?",
    uk: "Продовжіть дослідження на “Urlscan.io”. У якому місті знаходиться основна IP-адреса для сайту “tacticalshooters.net.restorationcheck.com”?",
    answer: "Chisinau"
  },
  {
    en: "On X.com geo search. The information you need was posted within 5-mile radius of Snorralaug Reykholt, Iceland on April 3, 2022. What brand is the rowing machine in the video with the dance?",
    uk: "Геопошук на X.com. Інформацію опубліковано в радіусі 5 миль від Snorralaug Reykholt, Ісландія, 3 квітня 2022 року. Який бренд веслового тренажера показано у відео з танцем?",
    answer: "StairMaster"
  },
  {
    en: "Interpol is looking for a Ukrainian female. Her first name is Olga. She is between 40 and 50 years old. What is she charged with?",
    uk: "Інтерпол розшукує громадянку України. Її ім’я — Ольга. Їй від 40 до 50 років. У чому її звинувачують?",
    answer: "MURDER"
  },
  {
    en: "Interpol is looking for a Serbian male with the last name Bjelotomic. He is between 25 and 35 years old. What is he charged with?",
    uk: "Інтерпол розшукує громадянина Сербії за прізвищем Бєлотомич. Йому від 25 до 35 років. У чому його звинувачують?",
    answer: "ROBBERY"
  },
  {
    en: "On the FBI Ten Most Wanted Fugitives list, there is a person who was born in 1998. What state was this person born in?",
    uk: "У списку ФБР «Десять найбільш розшукуваних утікачів» є особа, яка народилася у 1998 році. В якому штаті народилася ця особа?",
    answer: "Arizona"
  }
    ];

    function shuffle(array) {
      let current = array.length, temp, random;
      while (current) {
        random = Math.floor(Math.random() * current--);
        temp = array[current];
        array[current] = array[random];
        array[random] = temp;
      }
      return array;
    }

    function updateLanguage() {
      document.querySelectorAll('[data-en]').forEach(el => {
        el.textContent = el.getAttribute(`data-${lang}`);
      });

      document.querySelectorAll('[data-en-placeholder]').forEach(el => {
        el.setAttribute('placeholder', el.getAttribute(`data-${lang}-placeholder`));
      });

      const currentQ = usedQuestions[usedQuestions.length - 1];
      if (currentQ) liveQuestion.textContent = currentQ[lang];

      const instructionsText = document.getElementById('instructionsText');
      instructionsText.textContent = instructionsText.getAttribute(`data-${lang}`);
    }

    document.getElementById('languageToggle').addEventListener('click', () => {
      lang = lang === 'en' ? 'uk' : 'en';
      document.getElementById('languageToggle').textContent = lang === 'en' ? 'UKR' : 'ENG';
      updateLanguage();
    });

    document.getElementById('startSubmitBtn').addEventListener('click', () => {
      const answer = document.getElementById('answerInput').value.trim();
      const message = document.getElementById('message');
      if (answer === '33') {
        message.textContent = lang === 'en' ? 'Correct. Let\'s continue.' : 'Правильно. Переходимо далі.';
        continueBtn.classList.remove('hidden');
      } else {
        message.textContent = lang === 'en' ? 'Try again.' : 'Спробуйте ще раз.';
      }
    });

    continueBtn.addEventListener('click', () => {
      challengeDiv.classList.add('hidden');
      instructionsDiv.classList.remove('hidden');
    });

    letsGoBtn.addEventListener('click', () => {
      instructionsDiv.classList.add('hidden');
      quizDiv.classList.remove('hidden');
      totalScore = 0;
      usedQuestions = [];
      remainingQuestions = shuffle([...questions]);
      renderRandomQuestion();
    });

    function renderRandomQuestion() {
      if (remainingQuestions.length === 0) {
        showResults();
        return;
      }

      const randomIndex = Math.floor(Math.random() * remainingQuestions.length);
      const q = remainingQuestions[randomIndex];

      usedQuestions.push(q);
      remainingQuestions.splice(randomIndex, 1);

      liveQuestion.textContent = q[lang];
      liveQuestion.dataset.correctAnswer = q.answer;
      liveAnswer.value = '';
      liveMessage.textContent = '';
      liveAnswer.focus();
    }

    function checkAnswer() {
  const userAnswer = liveAnswer.value.trim();
  const correctAnswer = liveQuestion.dataset.correctAnswer;

  if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
    liveMessage.textContent = lang === 'en' ? 'Correct!' : 'Правильно!';
    totalScore++;
    setTimeout(renderRandomQuestion, 1000);
  } else {
    liveMessage.textContent = lang === 'en' ? 'Incorrect. Try again.' : 'Неправильно. Спробуйте ще раз.';
    // Do not advance the question — allow user to try again
  }
}

    function skipQuestion() {
      liveMessage.textContent = lang === 'en' ? 'Skipped.' : 'Пропущено.';
      setTimeout(renderRandomQuestion, 1000);
    }

    function showResults() {
      liveQuestion.textContent = lang === 'en' ? 'Challenge Complete! Well done!' : 'Виклик завершено! Чудова робота!';
      liveAnswer.classList.add('hidden');
      submitBtn.classList.add('hidden');
      skipBtn.classList.add('hidden');
      scoreDisplay.textContent = `${lang === 'en' ? 'Score' : 'Результат'}: ${totalScore}/22`;
      restartBtn.classList.remove('hidden');
    }

    submitBtn.addEventListener('click', checkAnswer);
    skipBtn.addEventListener('click', skipQuestion);
    liveAnswer.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') { checkAnswer(); }
    });

    restartBtn.addEventListener('click', () => {
      totalScore = 0;
      usedQuestions = [];
      remainingQuestions = shuffle([...questions]);
      updateLanguage();
      quizDiv.classList.remove('hidden');
      restartBtn.classList.add('hidden');
      liveAnswer.classList.remove('hidden');
      submitBtn.classList.remove('hidden');
      skipBtn.classList.remove('hidden');
      scoreDisplay.textContent = '';
      renderRandomQuestion();
    });

    quitBtn.addEventListener('click', quitChallenge);

    function quitChallenge() {
      if (typeof timerInterval !== 'undefined') clearInterval(timerInterval);
      quizDiv.innerHTML = `
        <section style="
          background-color: rgba(15, 23, 42, 0.85);
          padding: 2rem;
          border-radius: 12px;
          max-width: 800px;
          margin: 2rem auto;
          text-align: center;
          color: #f8fafc;
        ">
          <h1>${lang === 'en' ? 'Challenge Terminated' : 'Виклик завершено'}</h1>
          <p>
            ${lang === 'en'
              ? `You earned ${totalScore} point${totalScore === 1 ? '' : 's'} out of 22.`
              : `Ви отримали ${totalScore} бал${totalScore === 1 ? '' : 'ів'} з 22.`}
          </p>
          <blockquote style="font-style: italic; margin: 20px 20px; color: #facc15;">
            "${lang === 'en'
              ? 'If you quit on the process, you are quitting on the result.'
              : 'Якщо ви здаєтесь під час процесу — ви відмовляєтесь від результату.'}"
            — Idowu Koyenikan
          </blockquote>
          <button onclick="location.reload()">
            ${lang === 'en' ? 'Go to Start' : 'Повернутися на початок'}
          </button>
        </section>
      `;
    }
  </script>
</body>
</html>
